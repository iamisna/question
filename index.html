<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">
    <title>!!문제 은행!!</title>
    <style>
        .question {
            font-size: 40px;
            margin: 3px;
        }
        .question span {
            font-size: 30px;
        }
        .fail {
            color: red;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<!--    <script src="html2canvas.js"/>-->
<!--    <script src="jspdf.min.js" />-->
    <script type="text/javascript">
        let type = "";
        let success = "<span class='success'>정답</span>";
        let fail = "<span class='fail'>오답 : ${answer}</span>";
        $(document).ready(function(){

           /* $("#pdfBtn").on("click", function (){
                $('#savePdf').click(function() { // pdf저장 button id

                    html2canvas($('#pdfDiv')[0]).then(function(canvas) { //저장 영역 div id

                        // 캔버스를 이미지로 변환
                        var imgData = canvas.toDataURL('image/png');

                        var imgWidth = 190; // 이미지 가로 길이(mm) / A4 기준 210mm
                        var pageHeight = imgWidth * 1.414;  // 출력 페이지 세로 길이 계산 A4 기준
                        var imgHeight = canvas.height * imgWidth / canvas.width;
                        var heightLeft = imgHeight;
                        var margin = 10; // 출력 페이지 여백설정
                        var doc = new jsPDF('p', 'mm');
                        var position = 0;

                        // 첫 페이지 출력
                        doc.addImage(imgData, 'PNG', margin, position, imgWidth, imgHeight);
                        heightLeft -= pageHeight;

                        // 한 페이지 이상일 경우 루프 돌면서 출력
                        while (heightLeft >= 20) {
                            position = heightLeft - imgHeight;
                            doc.addPage();
                            doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                            heightLeft -= pageHeight;
                        }

                        // 파일 저장
                        doc.save('file-name.pdf');


                    });

                });
            })*/


            $("#create").on("click", function (){
                type = 1;
                $("#questions").html("");
                let count = $("#count").val();
                for(let i=0;i<count;i++) {
                    let first = rand(10,99);
                    let second = rand(10,99);
                    $("#questions").append("<div class='question'>"+ first+" + " + second + "= <input type='number' class='answer' style='width:100px; line-height: 40px; font-size: 40px;' data-first='"+first+"' data-second='"+second+"' /> <span></span></div>");
                }
            })
            $("#create2").on("click", function (){
                type = 2;
                $("#questions").html("");
                let count = $("#count").val();
                for(let i=0;i<count;i++) {
                    let first = rand(10,99);
                    let second = rand(10,99);
                    let third = rand(10,99);
                    $("#questions").append("<div class='question'>"+ first+" + " + second + " - "+third + "= <input type='number' class='answer' style='width:100px; line-height: 40px; font-size: 40px;' data-first='"+first+"' data-second='"+second+"' data-third='"+third+"' /> <span></span></div>");
                }
            })
            $("#create5").on("click", function (){
                type = 5;
                $("#questions").html("");
                let count = $("#count").val();
                for(let i=0;i<count;i++) {
                    let first = rand(10,99);
                    let second = rand(10,99);
                    while (true) {
                        if(first>second) {
                            break;
                        } else {
                            first = rand(10,99);
                            second = rand(10,99);

                        }
                    }
                    $("#questions").append("<div class='question'>"+ first+" - " + second + "= <input type='number' class='answer' style='width:100px; line-height: 40px; font-size: 40px;' data-first='"+first+"' data-second='"+second+"' /> <span></span></div>");
                }
            })
            $("#create3").on("click", function (){
                type = 3;
                $("#questions").html("");
                let count = $("#count").val();
                for(let i=0;i<count;i++) {
                    let first = rand(1,9);
                    let second = rand(1,9);
                    $("#questions").append("<div class='question'>"+ first+" X " + second + " = <input type='number' class='answer' style='width:100px; line-height: 40px; font-size: 40px;' data-first='"+first+"' data-second='"+second+"' /> <span></span></div>");
                }
            })

            $("#create4").on("click", function (){
                type = 4;
                $("#questions").html("");
                let count = $("#count").val();
                for(let i=0;i<count;i++) {
                    let first = rand(10,99);
                    let second = rand(10,99);
                    $("#questions").append("<div class='question'>"+ first+" X " + second + " = <input type='number' class='answer' style='width:100px; line-height: 40px; font-size: 40px;' data-first='"+first+"' data-second='"+second+"' /> <span></span></div>");
                }
            })

            $("#create6").on("click", function (){
                type = 6;
                $("#questions").html("");
                let count = $("#count").val();
                if(count < 10) {
                    for (let i = 0; i < 10; i++) {
                        let first = count;
                        let second = i + 1
                        $("#questions").append("<div class='question'>" + first + " X " + second + " = <input type='number' class='answer' style='width:100px; line-height: 40px; font-size: 40px;' data-first='" + first + "' data-second='" + second + "' /> <span></span></div>");
                    }
                } else {
                    alert (" 10 보다 작아야 합니다.");
                }
            })


            $("#final").on("click", function (){
                $(".answer").each(function (index, item){
                    if(type == 1 ) {
                        if (Number($(this).val()) == Number($(this).data("first")) + Number($(this).data("second"))) {
                            $(this).next().html(success);
                        } else {
                            $(this).next().html(fail.split("${answer}").join( (Number($(this).data("first")) + Number($(this).data("second")))) );
                        }
                    } else if(type == 2) {
                        if (Number($(this).val()) == Number($(this).data("first")) + Number($(this).data("second")) - Number($(this).data("third"))) {
                            $(this).next().html(success);
                        } else {
                            $(this).next().html(fail.split("${answer}").join (( Number($(this).data("first")) + Number($(this).data("second")) - Number($(this).data("third")))) );
                        }
                    } else if(type == 3 ) {
                        if (Number($(this).val()) == Number($(this).data("first")) * Number($(this).data("second")) ) {
                            $(this).next().html(success);
                        } else {
                            $(this).next().html(fail.split("${answer}").join( Number($(this).data("first")) * Number($(this).data("second"))) );
                        }
                    } else if(type == 4 ) {
                        if (Number($(this).val()) == Number($(this).data("first")) * Number($(this).data("second"))) {
                            $(this).next().html(success);
                        } else {
                            $(this).next().html(fail.split("${answer}").join( Number($(this).data("first")) * Number($(this).data("second"))) );
                        }
                    } else if(type == 5 ) {
                        if (Number($(this).val()) == Number($(this).data("first")) - Number($(this).data("second"))) {
                            $(this).next().html(success);
                        } else {
                            $(this).next().html(fail.split("${answer}").join( Number($(this).data("first")) - Number($(this).data("second"))) );
                        }
                    } else if(type == 6 ) {
                        if (Number($(this).val()) == Number($(this).data("first")) * Number($(this).data("second"))) {
                            $(this).next().html(success);
                        } else {
                            $(this).next().html(fail.split("${answer}").join( Number($(this).data("first")) * Number($(this).data("second"))) );
                        }
                    }
                    console.log(Number($(this).data("first")) +Number($(this).data("second")));
                })
            })



        })
        function rand(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
    </script>
</head>
<body>
문제 개수 : <input type="number" id="count"> <br/>
<button id="create">문제생성</button>
<button id="create2">더어려운 덧셈</button>
<button id="create5">뺄셈</button>
<button id="create6">구구단</button>
<button id="create3">곱셈</button>
<button id="create4">더어려운 곱셈</button>
<button id="final">채점</button>
<div id="questions">

</div>
</body>
</html>